
Runner.pages.PageSettings.addPageEvent('cerrar_vacancia',Runner.pages.constants.PAGE_ADD,"afterPageReady",function(pageObj,proxy,pageid,inlineRow,inlineObject,row){var formacion_acade=Runner.getControl(pageid,'id_formacion_academica');var tipo_movilidad=Runner.getControl(pageid,'tipo_movilidad');var tipo_discapacidad=Runner.getControl(pageid,'discapacidad_aceptada');var movilidad=Runner.getControl(pageid,'movilidad_propia');var nombre_puesto=Runner.getControl(pageid,'fk_ocupacion_puesto');var horario_trabajo=Runner.getControl(pageid,'horario_de_trabajo');var descrip_puesto=Runner.getControl(pageid,'descripcion_puesto');var requi_excluyente=Runner.getControl(pageid,'requisitos_exclu_formacion');var habilidades_conocimiento=Runner.getControl(pageid,'habilidades_conocimiento');var parahorario=Runner.getControl(pageid,'horario_rotativo');var salariodescr=Runner.getControl(pageid,'salario_descripcion');var registro_conducir=Runner.getControl(pageid,'id_registro_conducir');var id_sucursal=Runner.getControl(pageid,'id_empresa_sucursal');var id_ciudad=Runner.getControl(pageid,'id_cidudad');var id_departamento=Runner.getControl(pageid,'id_departamento');var id_rubro=Runner.getControl(pageid,'id_rubro');id_sucursal.on('blur change',function(){$.get("consultar_sucursal.php?",{id_s:this.getValue()}).done(function(data){if(data){var myarr=data.trim().split(":");id_rubro.setValue(myarr[5]);id_departamento.setValue(myarr[3]);id_ciudad.setValue(myarr[1]);}
else{}})});$(".value_requisitos_exclu_formacion_"+pageid).select2({tags:true});$(".value_habilidades_conocimiento_"+pageid).select2({tags:true});$(".value_fk_ocupacion_puesto_"+pageid).select2({tags:true,placeholder:'Ingresar nombre del puesto de la vacancia campo obligatorio',allowClear:true,maximumSelectionLength:1,multiple:true,language:"es"});$("#value_salario_final_"+pageid).maskNumber({integer:true,thousands:'.'});this.on('beforeSave',function(formObj,fieldControlsArr,pageObj){if(habilidades_conocimiento.getValue()!=null&&requi_excluyente.getValue()!=null&&nombre_puesto.getValue()!=null){valores=$(".value_requisitos_exclu_formacion_"+pageid).select2("val")
var strr1=valores.toString();formObj.baseParams['valores_multi_requisitos_todos']=strr1;valores2=$(".value_habilidades_conocimiento_"+pageid).select2("val")
var strr2=valores2.toString();formObj.baseParams['valores_multi_habilidades_conocimiento_todos']=strr2;valores3=$(".value_fk_ocupacion_puesto_"+pageid).select2("val")
var strr3=valores3.toString();formObj.baseParams['valores_multi_ocupacion_puesto_todos']=strr3;}});descrip_puesto.addStyle('text-transform: capitalize;');nombre_puesto.addStyle('text-transform: capitalize;');requi_excluyente.addStyle('text-transform: capitalize;');habilidades_conocimiento.addStyle('text-transform: capitalize;');$(".value_fk_ocupacion_puesto_"+pageid).select2({tags:true,placeholder:'Seleccionar',allowClear:true,multiple:false,language:"es",ajax:{url:"puesto_ocupacion_streaming.php",dataType:"json",delay:250,data:function(params){return{page:params.page||1,term:params.term};},processResults:function(data,params){return{results:data.results,pagination:{more:data.pagination.more}};},cache:true},minimumInputLength:0}).on('select2:close',function(){var element=$(this);var new_category=$.trim(element.val());if(new_category!='')
{$.ajax({url:"add_ocupacion.php",method:"POST",data:{category_name:new_category},success:function(data)
{if(data>=1)
{var new_category_upper=new_category.toUpperCase();element.append('<option value="'+data+'">'+new_category_upper+'</option>').val(data);}}})}});var flagformacion_acade=0;formacion_acade.on("change",function(e){if(flagformacion_acade==1){if(formacion_acade.getValue().includes('1')){formacion_acade.setValue('1');flagformacion_acade=0;}
else{flagformacion_acade=1;}}else{if(formacion_acade.getValue().includes('2')||formacion_acade.getValue().includes('3')||formacion_acade.getValue().includes('4')||formacion_acade.getValue().includes('5')){var selecciones=String(formacion_acade.getValue());formacion_acade.setValue(selecciones.substring(2));flagformacion_acade=1;}
else{flagformacion_acade=0;}}});var flagregistro_conducir=0;registro_conducir.on("change",function(e){if(flagregistro_conducir==1){if(registro_conducir.getValue().includes('1')){registro_conducir.setValue('1');flagregistro_conducir=0;}
else{flagregistro_conducir=1;}}else{if(registro_conducir.getValue().includes('2')||registro_conducir.getValue().includes('3')||registro_conducir.getValue().includes('4')||registro_conducir.getValue().includes('5')||registro_conducir.getValue().includes('6')||registro_conducir.getValue().includes('7')||registro_conducir.getValue().includes('8')||registro_conducir.getValue().includes('9')||registro_conducir.getValue().includes('10')){var selecciones_registro=String(registro_conducir.getValue());registro_conducir.setValue(selecciones_registro.substring(2));flagregistro_conducir=1;}
else{flagregistro_conducir=0;}}});var flagtipo_movilidad=0;tipo_movilidad.on("change",function(e){if(flagtipo_movilidad==1){if(tipo_movilidad.getValue().includes('1')){tipo_movilidad.setValue('1');flagtipo_movilidad=0;}
else{flagtipo_movilidad=1;}}else{if(tipo_movilidad.getValue().includes('2')||tipo_movilidad.getValue().includes('3')||tipo_movilidad.getValue().includes('4')||tipo_movilidad.getValue().includes('5')){var selecciones=String(tipo_movilidad.getValue());tipo_movilidad.setValue(selecciones.substring(2));flagtipo_movilidad=1;}
else{flagtipo_movilidad=0;}}});$(".value_salario_descripcion_"+pageid).select2({tags:true,placeholder:'Seleccionar',allowClear:true,multiple:false,language:"es",ajax:{url:"streaming_salario_descripcion.php",dataType:"json",delay:250,data:function(params){return{page:params.page||1,term:params.term};},processResults:function(data,params){return{results:data.results,pagination:{more:data.pagination.more}};},cache:true},minimumInputLength:0}).on('select2:close',function(){var element=$(this);var new_category=$.trim(element.val());if(new_category!='')
{$.ajax({url:"add_salario_descripcion.php",method:"POST",data:{category_name:new_category},success:function(data)
{if(data>=1)
{var new_category_upper=new_category.toUpperCase();element.append('<option value="'+data+'">'+new_category_upper+'</option>').val(data);}}})}});;});